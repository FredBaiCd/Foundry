{"pages/checkout":"{{> core/checkout/checkout}}\n","core/checkout/checkout":"<!DOCTYPE html>\r\n<html>\r\n  <head>\r\n    <title>{{head.title}}</title>\r\n    {{{head.meta_tags}}}\r\n    {{{head.config}}}\r\n\r\n    <link href=\"{{head.favicon}}\" rel=\"shortcut icon\">\r\n\r\n    {{{checkout.checkout_head}}}\r\n    {{{stylesheet '/assets/css/optimized-checkout.css'}}}\r\n    {{getFontsCollection}}\r\n\r\n    <script type=\"text/javascript\">\r\n        window.language = {{{langJson 'optimized_checkout'}}};\r\n    </script>\r\n  </head>\r\n\r\n  <body>\r\n    <header class=\"checkoutHeader optimizedCheckout-header\">\r\n      <div class=\"checkoutHeader-content\">\r\n        <h1 class=\"is-srOnly\">{{lang 'checkout.title'}}</h1>\r\n        <h2 class=\"checkoutHeader-heading\">\r\n          <a class=\"checkoutHeader-link\" href=\"{{urls.home}}\">\r\n            {{#if checkout.header_image}}\r\n              <img alt=\"{{settings.store_logo.title}}\" class=\"checkoutHeader-logo\" id=\"logoImage\" src=\"{{ checkout.header_image }}\"/>\r\n            {{else}}\r\n              <span class=\"header-logo-text\">{{settings.store_logo.title}}</span>\r\n            {{/if}}\r\n          </a>\r\n        </h2>\r\n      </div>\r\n    </header>\r\n\r\n    {{{checkout.checkout_content}}}\r\n<!-- start number replacer -->\r\n<script type=\"text/javascript\"><!--\r\nvs_account_id      = \"Ch4Nm1nEDW00zwAy\";\r\n//--></script>\r\n<script type=\"text/javascript\" src=\"https://rw1.marchex.io/euinc/number-changer.js\">\r\n</script>\r\n<!-- end ad widget -->\r\n\r\n<script\r\n  src=\"https://code.jquery.com/jquery-3.3.1.min.js\" integrity=\"sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=\" crossorigin=\"anonymous\"></script>\r\n<script>\r\n    $(\"body\").on('change', '[name=\"paymentProviderRadio\"]', function(){\r\n      // PO\r\n      $(\"#custom_po_number_err\").remove();\r\n      $(\"#checkout-payment-continue-custom\").hide();\r\n\r\n      if($(this).attr(\"id\") == \"radio-cheque\" && $(this).prop('checked') == true) {\r\n        const $checkItemBody = $(this).parents(\".form-checklist-item\").find(\".form-checklist-body\");\r\n        $checkItemBody.html(`\r\n                  <div class=\"form-checklist-container\">\r\n                      <div class=\"form-ccFields\">\r\n                          <div class=\"form-field--ccNumber form-field\">\r\n                          <label class=\"form-label optimizedCheckout-form-label\" for=\"ccNumber\">PO #</label>\r\n                          <input type=\"text\" id=\"custom_po_number\" class=\"form-input optimizedCheckout-form-input\" required/>\r\n                          </div>\r\n                      </div>\r\n                  </div>`);\r\n\r\n        $(\"#checkout-payment-continue\").hide();\r\n        $(`<button class=\"button button--action button--large button--slab optimizedCheckout-buttonPrimary\" id=\"checkout-payment-continue-custom\" type=\"button\">\r\n                      Place Order\r\n                  </button>`).insertAfter($(\"#checkout-payment-continue\"));\r\n\r\n      } else {\r\n        if($(\"#checkout-payment-continue-custom\").length > 0) {\r\n          $(\"#checkout-payment-continue-custom\").remove();\r\n        }\r\n        $(\"#checkout-payment-continue\").show();\r\n      }\r\n    });\r\n\r\n    $(\"body\").on('focus', '#custom_po_number', (event)=> {\r\n      $(\"#custom_po_number_err\").remove();\r\n    });\r\n\r\n    /*save po number to our databse and order*/\r\n    $(\"body\").on('click', '#checkout-payment-continue-custom', (event)=> {\r\n      let can_purchase = true;\r\n\r\n      if($(\"#radio-cheque\").prop(\"checked\") == true) {\r\n        if($(\"#custom_po_number\").length > 0 && $(\"#custom_po_number\").val().trim() != \"\") {\r\n          let poMessage = $(\"#custom_po_number\").val() || \"\";\r\n          sessionStorage.setItem(\"po_number\", poMessage);\r\n        } else {\r\n          can_purchase = false;\r\n        }\r\n      }\r\n\r\n      if(can_purchase) {\r\n        $(\"#checkout-payment-continue\").click();\r\n      } else {\r\n        $(\"#custom_po_number_err\").remove();\r\n        $('<span id=\"custom_po_number_err\" style=\"display:block;color:red;font-size:14px;margin-top:5px;\">PO # is required</span>').insertAfter($(\"#custom_po_number\"));\r\n      }\r\n    });\r\n\r\n    let interval = setInterval(function(){\r\n        if($(\".checkout-step--payment .checkout-form .form-checklist .form-checklist-item\").length > 0) {\r\n            clearInterval(interval);\r\n            if (sessionStorage.getItem(\"bundleb2b_user\") == \"none\") {\r\n              $($(\"#radio-cheque\")[0].parentNode.parentNode.parentNode).hide();\r\n            }\r\n\r\n          if(sessionStorage.getItem(\"company_payments\")) {\r\n            const company_payments = JSON.parse(sessionStorage.getItem(\"company_payments\"));\r\n            const $checkoutItems = $(\".checkout-step--payment .checkout-form .form-checklist .form-checklist-item\");\r\n            $checkoutItems.each(function(){\r\n              const $paymentEle = $(this).find('[name=\"paymentProviderRadio\"]');\r\n              const paymentCode = $paymentEle.attr(\"id\").replace(\"radio-\", \"\");\r\n              let isEnabled = false;\r\n              for (let i = 0; i < company_payments.length; i++) {\r\n                if(company_payments[i].code == paymentCode) {\r\n                  isEnabled = true;\r\n                }\r\n              }\r\n              if(!isEnabled) {\r\n                $(this).remove();\r\n              }\r\n            });\r\n            if($(\".checkout-step--payment .checkout-form .form-checklist .form-checklist-item\").length > 0) {\r\n              $(\".checkout-step--payment .checkout-form .form-checklist .form-checklist-item\").eq(0).find('[name=\"paymentProviderRadio\"]').prop(\"checked\", true);\r\n            }\r\n          }\r\n        }\r\n    },100);\r\n</script>\r\n  </body>\r\n\r\n</html>\r\n"}
